var cmu={colorObj:null,color:null,colors:["#27bdbe","#2bd2a3","#5c4561","#d5408b","#f05350","#4F86C6","#E8871E","#4C2719","#F8FA90","#ff0044"],init:function(){this.$body=$("body"),this.$chooser=$(".app__chooser"),this.$input=this.$chooser.find("input"),this.color=this.colors[Math.floor(Math.random()*this.colors.length)],this.$input.val(this.color.replace("#","")),this.setColor(this.color),this.buildColors(),this.events()},setColor:function(o){return this.color=o,this.colorObj=new Color(o),this.lightenMax=Math.floor(100-this.colorObj.lightness()),this.darkenMax=Math.floor(this.colorObj.lightness()),this.isInt(this.colorObj.rgb.r)&&this.isInt(this.colorObj.rgb.g)&&this.isInt(this.colorObj.rgb.b)?(this.$body.find(".app__chooser").css({backgroundColor:o,borderColor:this.darken(15)}),this.$chooser.find("h1").css({color:this.changeLightness(this.colorObj.lightness()<=50?70:20)}),this.$chooser.find("input").css({backgroundColor:this.lighten(90-+this.colorObj.lightness()),borderColor:this.darken(15)}),void this.buildBoxes()):(this.$body.find(".message").html("Not a valid color"),!1)},buildColors:function(){var o=[];_.each(this.colors,function(t){o.push('<a href="#" data-color="'+t.replace("#","")+'" style="background-color: '+t+'"></a>')}),this.$body.find(".app__colors").html(o.join(""))},buildBoxes:function(){for(var o,t=96,s=[];t>0;)o=this.changeLightness(t),textColor=this.changeLightness(50>t?80:20),s.push('<div style="background-color: '+o+'"><div class="box__hex" style="color: '+textColor+';">'+o+"</div></div>"),t-=4;this.$body.find(".app__boxes").html("").append(s)},changeLightness:function(o){return this.colorObj.hsl2hex({h:this.colorObj.hsl.h,s:this.colorObj.hsl.s,l:o})},lighten:function(o){return Transforms.lighten(this.colorObj,o)},darken:function(o){return Transforms.darken(this.colorObj,o)},isInt:function(o){var t=/^-?[0-9]+$/;return t.test(o)},validHex:function(o){return o.match(new RegExp("[0-9A-Fa-f]","g"))},events:function(){$(document).on("click",".app__colors a",function(o){o.preventDefault();var t=$(o.currentTarget);o=$.Event("keyup"),o.which=13,this.$input.val(t.data("color")).trigger(o)}.bind(this)),this.$input.on("keyup change",function(o){var t=$(o.target),s=this.validHex(t.val().replace("#","").substring(0,6)),i=s?s.join(""):"";t.val(i),6===i.length&&this.setColor("#"+i)}.bind(this))}};$(function(){cmu.init()});